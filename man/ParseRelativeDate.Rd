% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ParseRelativeDate.R
\name{ParseRelativeDate}
\alias{ParseRelativeDate}
\title{Parse Relative Date Strings}
\usage{
ParseRelativeDate(
  relativeString,
  type = c("start", "end"),
  refDate = .pkg_env$app_data$current_local_date
)
}
\arguments{
\item{relativeString}{A character string describing the relative date.
Supported formats include \code{"today"}, snap codes (\code{"CM"}, \code{"CQ+1"},
\code{"CY-2"}), and offset codes (\code{"D+3"}, \code{"M-1"}, \code{"W+2"}, \code{"Y-1"}).}

\item{type}{Whether to return the \code{"start"} or \code{"end"} of the period for
snap codes. Ignored for simple offset formats. Defaults to \code{"start"}.}

\item{refDate}{The reference \code{Date} from which calculations are made.
Defaults to \code{app_data$current_local_date}.
\subsection{Returns}{

A \code{Date} object representing the resolved date.
}

\subsection{Errors}{

Throws an error if \code{relativeString} does not match any supported format.
}}
}
\description{
\code{ParseRelativeDate()} converts a relative date string into an actual \code{Date},
using a reference date (default: \code{app_data$current_local_date}).
It supports both \strong{snap codes} (period-based anchors such as current month,
current quarter, current year) and \strong{offset codes} (add/subtract days,
weeks, months, years).
}
\details{
\subsection{Supported Formats}{
\subsection{1. Special Keywords}{
\itemize{
\item \code{"today"} — returns the reference date unchanged.
}
}

\subsection{2. Snap Codes (\code{CM}, \code{CQ}, \code{CY})}{

Snap codes anchor to the reference date's \strong{current} month/quarter/year.
They also support optional offsets:
\itemize{
\item \code{"CM"} — current month
\item \code{"CQ"} — current quarter
\item \code{"CY"} — current year
}

You may append:
\itemize{
\item \code{+N} (forward N units)
\item \code{-N} (back N units)
}

Examples:
\itemize{
\item \code{"CM"} → current month
\item \code{"CM+1"} → next month
\item \code{"CQ-2"} → two quarters ago
}

When \code{type = "start"} or \code{"end"}, the function returns the
start or end of that month/quarter/year (e.g., \code{"CM"} with
\code{type = "end"} returns the last day of the month).
}

\subsection{3. Offset Codes}{

Offset codes adjust the reference date by a number of time units:
\itemize{
\item \code{"D+3"} — 3 days ahead
\item \code{"W-1"} — 1 week ago
\item \code{"M+2"} — 2 months ahead
\item \code{"Y-5"} — 5 years ago
}
}

}
}
\examples{
# Must call initialize package before use
InitializePackage(list(
current_local_date = Sys.time() |>
lubridate::with_tz('America/Denver')
|> as.Date()))
# Using snap codes
ParseRelativeDate("CM")           # Start of current month
ParseRelativeDate("CM", "end")    # End of current month
ParseRelativeDate("CQ+1")         # Start of next quarter

# Using offsets
ParseRelativeDate("D+3")          # Three days from refDate
ParseRelativeDate("M-1")          # One month before refDate

}
