% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/CheckWriteResult.R
\name{CheckWriteResult}
\alias{CheckWriteResult}
\title{Check Database Write Result and Display User Feedback}
\usage{
CheckWriteResult(
  result,
  successMessage = "Write successful.",
  context = NULL,
  expectedMin = 0,
  expectedMax = 1,
  showMessage = TRUE
)
}
\arguments{
\item{result}{Numeric value returned by \code{DBI::dbExecute()} indicating the
number of rows affected by the operation.}

\item{successMessage}{Character string displayed in the success modal.
Default: "Write successful."}

\item{context}{Optional character string providing context for the operation
(e.g., "inserting training record", "updating attendance"). Used in error
messages and logs. Should start with a verb in gerund form.}

\item{expectedMin}{Minimum number of rows expected to be affected. Default: 0}

\item{expectedMax}{Maximum number of rows expected to be affected. Default: 1}

\item{showMessage}{Logical indicating whether to display a success modal.
Set to FALSE for silent success (still logs). Default: TRUE}
}
\value{
Logical. Returns TRUE if the write operation was successful (result
is within expected range), FALSE otherwise.
}
\description{
Validates the result of a database write operation (INSERT, UPDATE, DELETE)
and displays appropriate success or error modals to the user. Includes
logging for monitoring and debugging.
}
\details{
The function validates that:
\itemize{
\item \code{result} is a numeric value
\item \code{result} is not NA
\item \code{result} is within the greater than or equal to expectedMin and less than or equal to expectedMax
}

\strong{Success behavior:}
\itemize{
\item Optionally displays a success modal (if \code{showMessage = TRUE})
\item Logs success message
\item Returns TRUE
}

\strong{Failure behavior:}
\itemize{
\item Displays error modal with context and result details
\item Logs error message
\item Returns FALSE
}
}
\section{Usage Patterns}{

\strong{Single row insert:}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{result <- dbExecute(con, "INSERT INTO ...")
CheckWriteResult(result, "Training record added", "inserting training")
}\if{html}{\out{</div>}}

\strong{Update with expected range:}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{result <- dbExecute(con, "UPDATE firefighter SET ...")
CheckWriteResult(result, "Firefighters updated", "updating firefighters",
                 expectedMin = 1, expectedMax = 10)
}\if{html}{\out{</div>}}

\strong{Silent success for batch operations:}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{result <- dbExecute(con, "DELETE FROM ...")
CheckWriteResult(result, context = "deleting old records", showMessage = FALSE)
}\if{html}{\out{</div>}}
}

\examples{
\dontrun{
# Basic usage - single row insert
result <- dbExecute(con, "INSERT INTO training VALUES (...)")
if (CheckWriteResult(result, "Training added successfully", "inserting training")) {
  # Continue with next operation
}

# Allow multiple rows to be affected
result <- dbExecute(con, "UPDATE attendance SET ... WHERE department = 'A'")
CheckWriteResult(result, "Attendance updated", "updating attendance",
                 expectedMin = 1, expectedMax = 50)

# Silent success (no modal)
result <- dbExecute(con, "DELETE FROM temp_table")
if (CheckWriteResult(result, context = "deleting temp data", showMessage = FALSE)) {
  log_info("Temp data cleaned up")
}

# Delete operation that might affect 0 rows (valid)
result <- dbExecute(con, "DELETE FROM logs WHERE date < ?", old_date)
CheckWriteResult(result, "Old logs removed", "deleting old logs",
                 expectedMin = 0, expectedMax = 1000)
}

}
