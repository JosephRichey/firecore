% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/UpdateReactives.R
\name{UpdateReactives}
\alias{UpdateReactives}
\title{Update Reactive Data Frames from Database Tables}
\usage{
UpdateReactives(rdfs, dbTableName = NULL)
}
\arguments{
\item{rdfs}{A reactive values object (typically created with \code{reactiveValues()})
where the queried and transformed data frames will be stored.}

\item{dbTableName}{A character vector of table names to query and update.
If NULL (default), uses the value from \code{getOption("firecore.default_tables")}.
If neither is specified, an error is raised.}
}
\value{
Invisibly returns NULL. The function modifies \code{rdfs} as a side effect,
storing each table's data frame with the table name as the key.
}
\description{
Queries specified database tables and applies appropriate transformations,
primarily timezone conversions for datetime fields. Results are stored in
a reactive values object for use in Shiny applications.
}
\details{
The function applies table-specific transformations based on the table name:
\itemize{
\item \strong{training}: Converts start_time and end_time to local timezone
\item \strong{attendance}: Converts check_in and check_out to local timezone
\item \strong{response}: Converts response_start and response_end to local timezone
\item \strong{incident}: Converts incident_start and incident_end to local timezone
\item \strong{firefighter}: Converts start_date to local timezone and sorts by display_order
\item \strong{firefighter_response}: Sets NA time_adjustment values to 0
\item Other tables: No transformation applied
}

All datetime conversions use the \code{ConvertToLocalPosix()} function from this
package to ensure consistent timezone handling across the application.
}
\section{Configuration}{

Set default tables for your app in global.R using:
\preformatted{
options(firecore.default_tables = c('training', 'firefighter', 'attendance'))
}

Once configured, you can call \code{UpdateReactives(rdfs)} without specifying tables.
You can always override the default by explicitly passing \code{dbTableName}.
}

\examples{
\dontrun{
# In your app's global.R - configure default tables once
options(firecore.default_tables = c('training', 'firefighter', 'attendance'))

# In a Shiny server function
server <- function(input, output, session) {
  # Create reactive values object
  rdfs <- reactiveValues()

  # Update using configured defaults
  UpdateReactives(rdfs)

  # Or override the defaults for specific needs
  UpdateReactives(rdfs, c("incidents", "apparatus"))

  # Access the data
  output$table <- renderTable({
    rdfs$training
  })
}

# Different apps can have different configurations
# Training App global.R:
options(firecore.default_tables = c('training', 'attendance', 'firefighter'))

# Incident App global.R:
options(firecore.default_tables = c('incidents', 'apparatus', 'firefighter_response'))
}

}
