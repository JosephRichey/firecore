% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/IdentifyFirefighter.R
\name{IdentifyFirefighterServer}
\alias{IdentifyFirefighterServer}
\title{Identify Firefighter Server (Server Logic)}
\usage{
IdentifyFirefighterServer(
  id,
  current_user,
  show_on_load = TRUE,
  officer_filter = FALSE
)
}
\arguments{
\item{id}{The namespace ID for the Shiny module (e.g., "identify_firefighter")}

\item{current_user}{A reactiveVal containing the current user's name. Should
be created in the parent scope and passed to this module. The module will
update this value upon successful authentication.}

\item{show_on_load}{Logical. If TRUE (default), the identification modal will
be displayed automatically when the module loads and current_user is NULL.
Set to FALSE if you want to trigger the modal manually.}

\item{officer_filter}{Logical. If TRUE, only officers will be shown in the
firefighter dropdown. If FALSE (default), all active firefighters are shown.
This is useful for restricting certain actions to department leadership.}
}
\value{
None; side effects include updating the reactive \code{current_user} value
and displaying notifications/modals.
}
\description{
A Shiny module that handles firefighter authentication via PIN validation.
This module displays a modal dialog for firefighters to sign in and validates
their credentials. The modal can be shown automatically on module load or
triggered manually.
}
\details{
When the submit button is pressed, this module:
\enumerate{
\item Checks the entered PIN against the stored firefighter PIN in the database.
\item If correct, sets the reactive \code{current_user} to the firefighter's name
and shows a success notification.
\item If incorrect, shows a warning alert allowing retry.
}
}
\examples{
\dontrun{
# In your main server function
server <- function(input, output, session) {
  # Create reactive to store current user
  current_user <- reactiveVal(NULL)

  # Initialize the identification module
  # Modal shows automatically on app load
  IdentifyFirefighterServer("identify_firefighter", current_user)

  # Restrict to officers only
  IdentifyFirefighterServer("officer_action", current_user, officer_filter = TRUE)

  # Use current_user elsewhere in your app
  observe({
    req(current_user())
    print(paste("Current user:", current_user()))
  })
}

# To trigger modal manually (show_on_load = FALSE)
IdentifyFirefighterServer("identify_firefighter", current_user, show_on_load = FALSE)
# Then trigger with: IdentifyFirefighterModal(session$ns, officer_filter = FALSE) when needed
}

}
