% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/BuildDateTime.R
\name{BuildDateTime}
\alias{BuildDateTime}
\title{Build a datetime from separate date and time components}
\usage{
BuildDateTime(
  time,
  date,
  input = c("local", "UTC"),
  return_type = c("UTC", "local")
)
}
\arguments{
\item{time}{Time component as character string (e.g., "14:30:00", "14:30"),
or as a POSIXct/POSIXlt object (time will be extracted automatically)}

\item{date}{Date component as Date object, character string, or any format
that can be coerced to a date}

\item{input}{Timezone of the input date and time. One of:
\itemize{
\item \code{"local"} - Input is in local timezone (default)
\item \code{"UTC"} - Input is in UTC timezone
}}

\item{return_type}{Desired timezone of the returned datetime. One of:
\itemize{
\item \code{"UTC"} - Return datetime in UTC (default, useful for database storage)
\item \code{"local"} - Return datetime in local timezone
}}
}
\value{
A POSIXct datetime object in the requested timezone
}
\description{
Combines a date and time into a single datetime object. Handles timezone
conversions and can process time inputs from Shiny time inputs (which
automatically include dates). Useful for reconstructing datetimes from
separate date and time picker inputs.
}
\details{
The function retrieves the local timezone from application settings via
\code{\link{GetSetting}} (key: "ltz").

When \code{time} is a POSIXct or POSIXlt object (as returned by Shiny time
inputs), the function automatically extracts just the time component using
\code{hms::as_hms()}, discarding any date information that may be present.

The conversion process follows these steps:
\enumerate{
\item Extract time component if input is POSIXct/POSIXlt
\item Combine date and time into datetime string
\item Parse as POSIXct in the input timezone
\item Convert to the requested return timezone
}

This function is particularly useful for Shiny applications where date and
time are collected in separate input widgets and need to be combined for
database storage (typically in UTC).
}
\examples{
\dontrun{
# Build datetime from character inputs (local timezone)
dt <- BuildDateTime(time = "14:30:00", date = "2025-01-15",
                    input = "local", return_type = "UTC")
# Returns: "2025-01-15 21:30:00 UTC" (if local is America/Edmonton MST)

# Build from Shiny time input (which includes unwanted date)
shiny_time <- as.POSIXct("1970-01-01 14:30:00")
dt <- BuildDateTime(time = shiny_time, date = as.Date("2025-01-15"))
# Extracts time "14:30:00" and combines with correct date

# Build datetime that stays in local timezone
dt_local <- BuildDateTime(time = "09:00:00", date = "2025-01-15",
                          input = "local", return_type = "local")

# Build from UTC inputs
dt <- BuildDateTime(time = "21:30:00", date = "2025-01-15",
                    input = "UTC", return_type = "UTC")
}

}
\seealso{
\code{\link{GetSetting}}, \code{\link{ConvertToLocalPosix}},
\code{\link{FormatDateTime}}
}
